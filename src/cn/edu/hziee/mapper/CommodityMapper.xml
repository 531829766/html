<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"

        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.edu.hziee.mapper.CommodityMapper">
    <select id="findByCommodityId" parameterType="Integer" resultType="cn.edu.hziee.model.Commodity">
        select * from commodity where id=#{id}
    </select>

    <update id="update" parameterType="cn.edu.hziee.model.Commodity">
        update commodity
        <set>
            <if test="picture!=null and picture !=''">
                picture = #{picture},
            </if>
            <if test="commodity_name!=null and commodity_name !=''">
                commodity_name = #{commodity_name},
            </if>
            <if test="original!=null and original!=''">
                original = #{original},
            </if>
            <if test="discount!=null and discount!=''">
                discount = #{discount},
            </if>
            <if test="stock!=null and stock !=''">
                stock = #{stock},
            </if>
            <if test="commodity_type!=null and commodity_type !=''">
                commodity_type = #{commodity_type},
            </if>
        </set>
        where id=#{id}
    </update>

    <select id="findByCommodityName" parameterType="String" resultType="cn.edu.hziee.model.Commodity">
        select * from commodity where commodity_name like concat('%',#{value},'%')
    </select>



    <insert id="insert" parameterType="cn.edu.hziee.model.Commodity">
        insert into commodity(id,picture,commodity_name,original,discount,stock,commodity_type)
        values(#{id},#{picture},#{commodity_name},#{original},#{discount},#{stock},#{commodity_type})
    </insert>



    <delete id="delete" parameterType="Integer">
         delete from commodity where id=#{id}
     </delete>

    <!-- 分页-->

    <select id="findByCommodityPage" parameterType="HashMap" resultType="cn.edu.hziee.model.Commodity">
        select * from commodity
        <where>
            <if test="picture!=null and picture !=''">
               and  picture = #{picture}
            </if>
            <if test="commodity_name!=null and commodity_name !=''">
                and  commodity_name
                like concat('%',#{commodity_name},'%')
            </if>
            <if test="original!=null and original!=''">
                and  original = #{original}
            </if>
            <if test="discount!=null and discount!=''">
                and  discount = #{discount}
            </if>
            <if test="stock!=null and stock !=''">
                and  stock = #{stock}
            </if>
            <if test="commodity_type!=null and commodity_type !=''">
                and  commodity_type = #{commodity_type}
            </if>

        </where>
        <if test="start!=null and size!=null">limit ${start},${size}</if>
    </select>

    <select id="selectCommodityCount" parameterType="HashMap" resultType="Integer">
        select count(*) from commodity
        <where>
            <if test="commodity_name !=null and commodity_name !=''">
                 and commodity_name = #{commodity_name}
            </if>
            <if test="picture !=null and picture !=''">
                and  picture like concat('%',#{picture},'%')
            </if>

            <if test="original !=null and original!=''">
                and    original = #{original}
            </if>
            <if test="discount !=null and discount!=''">
                and  discount = #{discount}
            </if>
            <if test="stock !=null and stock !=''">
                and   stock = #{stock}
            </if>
            <if test="commodity_type !=null and commodity_type !=''">
                and  commodity_type = #{commodity_type}
            </if>
        </where>
    </select>

</mapper>